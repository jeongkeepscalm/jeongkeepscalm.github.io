---
title: "[Issue] Overflowed gitlab capacity & setting crontab"
description: "[Issue] Overflowed gitlab capacity & setting crontab"
date: 2025-02-03
categories: [ Working, Issues ]
tags: [ Working, Issues ]
---

***âš ï¸ Issue***  
ê¹ƒë©ì„ ì„¤ì¹˜í–ˆë˜ ì„œë²„ê°€ ìš©ëŸ‰ì´ ê½‰ì°¨ì„œ ê¹ƒë© ì ‘ì† ë¶ˆê°€
```bash
df -h
```
> ì‚¬ìš©ëŸ‰ í™•ì¸  

<br>

âœ… Solution  
```bash
# ë£¨íŠ¸(/) ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ í° ë””ë ‰í„°ë¦¬ë¥¼ ì°¾ê¸°
sudo du -sh /* 2>/dev/null | sort -hr | head -n 10
sudo du -sh /var/* 2>/dev/null | sort -hr | head -n 10
sudo du -sh /var/lib/* 2>/dev/null | sort -hr | head -n 10
sudo du -sh /var/lib/docker/* 2>/dev/null | sort -hr | head -n 10
# ...
# íƒ€ê³ íƒ€ê³  ë“¤ì–´ê°€ì„œ [ì»¨í…Œì´ë„ˆëª…]-json.log ê°€ ì œì¼ 78GB ìš©ëŸ‰ì„ ì°¨ì§€í•˜ê³  ìˆëŠ” ê²ƒì„ ë°œê²¬

# ë¡œê·¸ íŒŒì¼ì„ ë¹„ìš°ëŠ”(Truncate) echo ëª…ë ¹ì–´ë¡œ > ì—°ì‚°ìë¥¼ ì‚¬ìš©
sudo sh -c 'echo "" > /var/lib/docker/containers/<ì»¨í…Œì´ë„ˆID>/<ì»¨í…Œì´ë„ˆID>-json.log'
```

<br>
<hr>

### crontab ì„¤ì •

```bash
# ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ë“±ë¡í•œ í¬ë¡ íƒ­ í¸ì§‘ ë° ëª©ë¡ë³´ê¸°
crontab -e 
crontab -l

# e.g.
0 0 * * * /home/core/crontest/clear-docker-log.sh; cat /home/core/crontest/test.txt >> /home/core/crontest/cron.log 2>&1

# ì‹œìŠ¤í…œ ì „ì—­ crontab í™•ì¸
/etc/crontab, /etc/cron.d/ 
```

<br>

**ğŸ“– Info**  
- ì‚¬ìš©ì í¬ë¡ íƒ­(crontab -e)ì— í‘œì‹œë˜ëŠ” ê²ƒë“¤ì´ /etc/crontab íŒŒì¼ì—ëŠ” ëª…ì‹œê°€ ë˜ì–´ìˆì§€ ì•ŠëŠ”ë‹¤.  
- ì‚¬ìš©ì í¬ë¡ íƒ­ì€ /var/spool/cron/<ì‚¬ìš©ìëª…> ë˜ëŠ” /var/spool/cron/crontabs/<ì‚¬ìš©ìëª…> ë“±(ë°°í¬íŒì— ë”°ë¼ ê²½ë¡œê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ)ì— ë³„ë„ë¡œ ì €ì¥ëœë‹¤.  