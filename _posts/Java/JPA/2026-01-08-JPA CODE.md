---
title: "JPA Code"
description: "JPA Code"
date: 2026-01-08
categories: [ JPA, Java Basic ]
tags: [ JPA, Java Basic ]
---


***@OneToMany : LAZY***

```java
/**
  *  @OneToMany
  *      기본 fetch 전략은 FetchType.LAZY 이다.
  *      @OneToMany: AnswerList 는 가짜 객체 상태로 만들고 필요할 때 DB 접근해서 가져오는 전략.
  *      findById 실행 후 DB 접속은 끊기며 getAnswerList 실행 LazyInitializationException 오류 발생.
  *  
  *  해결방안
  *      1. @Transactional : 메소드 종료될 때까지 DB 세션 유지.
  *      2. fetch=FetchType.EAGER 명시 ( 성능 면에서 치명적인 문제가 발생 )
  */
@Test
@Transactional
void getAnswerList() {
    Optional<Question> oq = this.questionRepository.findById(3);
    assertTrue(oq.isPresent());
    Question q = oq.get();

    List<Answer> answerList = q.getAnswerList();

    assertEquals(1, answerList.size());
    assertEquals("네 자동으로 생성됩니다.", answerList.get(0).getContent());
}
```

******

```java
@Entity
// 엔티티 변화 감지 후 데이터 자동 저장(등록일, 수정일)
// @EnableJpaAuditing Config bean 등록 필요
@EntityListeners(AuditingEntityListener.class)
@Table(name = "user_user_entity")
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class UserEntity { ... }

```